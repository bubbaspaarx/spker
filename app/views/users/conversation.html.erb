
<div class="message-container">
  <div id="new-message">
    <%= link_to 'Send a message', messages_ajax_user_path(@correspondent), class: 'btn btn-primary', id:'message-btn', remote: true %>
  </div>
  <div id="message-list">
    <% @messages.each do |message| %>
      <%= render 'shared/message', {message: message} %>
    <% end %>
  </div>
</div>

<script>
  const sendRequest = () => {
    const xhttp = new XMLHttpRequest()
    xhttp.open('GET', '/users/<%= @user.id %>/inbox/<%= @correspondent.id %>', true)
    xhttp.setRequestHeader('Accept', 'text/javascript')
    xhttp.send()
  }
  setInterval(sendRequest, 5000)
</script>
